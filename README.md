# message-template-editor

Редактор шаблонов сообщений - тестовое задание.

Цель тестового задания - разработка редактора шаблонов сообщений и виджета предпросмотра сообщений. Пользователь должен иметь возможность с помощью текстовых полей и кнопок формировать шаблон сообщений, который содержит перменные, а также условные ветвления (по типу если-то-иначе: IF - THEN - ELSE). С помощью этого шаблона пользователь может автоматизировать создание стандартных писем, содержание которых будет зависеть от того, каким именно переменным присваивается значение, а каким нет (какая информация имеется). Проверить работу шаблона можно с помощью виджета предпросмотра сообщения, где пользователь может присвоить переменным определенное значение, после чего сразу формируется итоговое сообщение.\
В настоящее время шаблон сообщения сохраняется в локальном хранилище браузера и загружается оттуда. При отсутствии шаблона в локальном хранилище, шаблон будет состоять из одного текстового поля, кнопок для вставки переменных и условного ветвления. Его можно заполнять текстом с переменными и разбивать на несколько полей, делая условные ветвления.\
Набор переменных в настоящее время ограничен и заранее определен (пользователем редактироваться не может).

При загрузке web-приложения появляется кнопка `Message Editor`. Нажатие на эту кнопку открывает редактор шаблона сообщения с кнопками вставки переменных, условного ветвления, кнопками управления редактором.

## Переменные

Поставте в редакторе шаблона сообщений курсор в место, где необходимо вставить переменную, и нажмите кнопку с соответствующим имененем переменной. В шаблоне появиться переменная в виде её названия, окруженного с обеих сторон фигурными скобками.\
В виджете предпросмотра сообщения первоначальное значение переменной - пустая строка (без какого-либо содержания).
В полях редактора шаблона сообщения и в виджете предпросмотра сообщения могут быть использованы только те переменные, которые указаны в кнопках переменных редактора сообщений. Если пользователь с помощью клавиатуры введет в текстовое поле редактора слово, окружённое фигурными скобками, которое отсутствует в кнопках с переменными, то это не приведет к установлению новой переменой. При обработке шаблона сообщения данное слово вместе со скобками будет воспринято обработчиком как обычный текст без каких-либо изменений. В виджете предпросмотра сообщения не будет возможность придать такому слову какое-либо значение как переменной.

## Условное ветвление

Поставте в редакторе шаблона сообщений курсор в место, где содержание сообщения должно зависеть от условия. Нажмите кнопку вставки условного ветвления. Поле, где находился курсор, будет разбито на две части. Текст, который был слева и выше от курсора, останется в текущем поле. Текст, который был справа и ниже курсора, перенесётся в новое текстовое поле, которое будет ниже. Между этими двумя полями будут сформированы ещё три текстовых поля:

- поле IF: предназначено для формирования условия. Условие считается выполненным, если после применения переменных в данном поле будет какой-либо текст. Условие считается невыполненным, если после применения переменных в данном поле будет пустая строка (отсутствуют какие-либо символы, в том числе пробелы). Например, если в поле IF будет втсавлена переменная {name}, и в виджете предпросмотра сообщения данной переменной будет дано какое-либо значение, то будет считаться, что условие соблюдается, и будет выведено содержание поля THEN. Если переменной {name} значение придано не будет, то будет выведено содержание поля ELSE. Если помимо переменной в поле IF будет ещё какой-либо текст, то условие будет считаться выполненным независимо от придания переменной значения, так как имеется текст, наличие которого не зависит от того, определена перменная или не определена;
- поле THEN: здесь набирается текст, который выводится в случае если в поле IF отсутствует пустая строка;
- поле ELSE: здесь набирается текст, который выводится в случае если в поле IF будет находиться пустая строка.

При нажатии на кнопку `Delete` условное ветвление, внутри которого кнопка находится, удаляется. При этом из шаблона удаляются поля IF, THEN и ELSE. Поля, которые находятся над и под этим ветвлением, соединяются в одно с соединением их текстового содержимого.

## Кнопки управления редактором шаблона сообщения

`Preview` - кнопка вызова виджета предварительного просмотра сообщения. Окно с виджетом открывается поверх редактора шаблона сообщения. Работа с шаблоном при этом невозможна.\
`Save` - сохранение текущего шаблона в локальное хранилище браузера.\
`Close` - закрытие редактора шаблона сообщения.

## Виджет предварительного просмотра сообщения

Позволяет проверить работу шаблона сообщения. При загрузке виджета пользователь первоначально видит сообщение, которое должно быть, если все переменные не определены. В виджете пользователь может придать переменным необходимое значение (в виде строки) и проверить, как изменилось сообщение. Текст сообщения меняется "на лету".\
В виджете обрабатывается текущий шаблон сообщения с учётом изменений, которые были сделаны в редакторе, даже если они не сохранены в локальном хранилище браузера.\
Кнопка `Close` виджета закрывает виджет предварительного просмотра сообщения.

## Команды проекта

Находясь в каталоге проекта можно запустить следующие команды:

- `npm start`: запуск приложения в режиме разработки. Приложение откроется в браузере по адресу: [http://localhost:3000](http://localhost:3000). При внесении изменений в файлы проекта и их сохранении, изменения будут автоматически отражаться в браузере;
- `npm test`: запуск автоматического тестирования. В настоящее время в проекте осуществлено 100%-е покрытие тестами функции, которая обрабытывает шаблон приложения и с учётом определенных переменных формирует итоговый текст сообщения. Проверить уровень покрытия тестами можно с помощью команды `npm test -- --coverage --watchAll`;
- `npm run build`: создание файлов приложения для дальнейшего деплоя. Файлы будут собраны в папке `build`.

## Использованные технологии

При разработке проекта использовались следующие технологии:

- React
- Typescript

Для настройки окружения использован create-react-app

## Запланированные доработки

Предоставить пользователю возможность самостоятельно определять перечень переменных, которые будут использоваться в редакторе шаблона сообщения.
Разработать возможность сохранять несколько шаблонов и возможность выбрать шаблон при загрузке редактора.
